<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Course Progress System</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1400px;
      margin: 20px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .sections-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    
    .section {
      background: white;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ddd;
      height: fit-content;
    }
    
    .full-width {
      grid-column: 1 / -1;
    }
    
    .form-group {
      margin: 10px 0;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      font-size: 14px;
    }
    
    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 14px;
    }
    
    button {
      background: #007bff;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px 5px 5px 0;
      font-size: 14px;
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    button.success {
      background: #28a745;
    }
    
    button.warning {
      background: #ffc107;
      color: #212529;
    }
    
    .message {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      display: none;
      font-size: 13px;
    }
    
    .success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .warn {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    
    .info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }
    
    h2 {
      margin-top: 0;
      color: #007bff;
      font-size: 18px;
    }
    
    h3 {
      margin: 15px 0 10px 0;
      font-size: 16px;
      color: #555;
    }
    
    .course-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin: 10px 0;
      background: #f9f9f9;
    }
    
    .course-title {
      font-weight: bold;
      color: #007bff;
      margin-bottom: 5px;
    }
    
    .progress-bar {
      width: 100%;
      height: 20px;
      background: #e9ecef;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }
    
    .progress-fill {
      height: 100%;
      background: #28a745;
      transition: width 0.3s ease;
    }
    
    .lesson-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      margin: 5px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
    }
    
    .lesson-completed {
      background: #d4edda;
      border-color: #c3e6cb;
    }
    
    .lesson-info {
      flex: 1;
    }
    
    .lesson-actions {
      display: flex;
      gap: 5px;
    }
    
    .data-display {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 15px;
      margin: 10px 0;
      font-family: monospace;
      font-size: 12px;
      max-height: 400px;
      overflow-y: auto;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .sections-container {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      
      body {
        max-width: 600px;
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <h1>Course Progress System - ByteTechEdu</h1>
  
  <div class="sections-container">
    <!-- Mis Cursos -->
    <div class="section">
      <h2>Mis Cursos</h2>
      <button id="btnLoadMyCourses" type="button">Cargar Mis Cursos</button>
      <div id="msgMyCourses" class="message"></div>
      <div id="myCoursesContainer"></div>
    </div>

    <!-- Contenido del Curso -->
    <div class="section">
      <h2>Contenido del Curso</h2>
      <form id="formGetCourseContent">
        <div class="form-group">
          <label>ID del Curso</label>
          <input id="courseId" type="number" required placeholder="1" />
        </div>
        <button type="submit">Obtener Contenido</button>
        <div id="msgCourseContent" class="message"></div>
      </form>
      <div id="courseContentContainer"></div>
    </div>

    <!-- Crear Nueva Secci√≥n -->
    <div class="section">
      <h2>Crear Nueva Secci√≥n</h2>
      <form id="formCreateSection">
        <div class="form-group">
          <label>ID del Curso</label>
          <input id="newSectionCourseId" type="number" required placeholder="1" />
        </div>
        <div class="form-group">
          <label>Nombre de la Secci√≥n</label>
          <input id="sectionName" type="text" required placeholder="Introducci√≥n al tema" />
        </div>
        <button type="submit">Crear Secci√≥n</button>
        <div id="msgCreateSection" class="message"></div>
      </form>
    </div>

    <!-- Marcar Progreso Manual -->
    <div class="section">
      <h2>Marcar Progreso Manual</h2>
      <form id="formMarkProgress">
        <div class="form-group">
          <label>ID de la Lecci√≥n</label>
          <input id="lessonId" type="number" required placeholder="1" />
        </div>
        <button type="submit">Marcar como Completada</button>
        <div id="msgMarkProgress" class="message"></div>
      </form>
    </div>

    <!-- Simulador de Time Validator -->
    <div class="section full-width">
      <h2>Simulador de Time Validator</h2>
      <p>Esta secci√≥n simula el comportamiento autom√°tico de marcar lecciones como completadas cuando se pasa el tiempo requerido.</p>
      <form id="formTimeValidator">
        <div class="form-group">
          <label>ID de la Lecci√≥n</label>
          <input id="timeValidatorLessonId" type="number" required placeholder="1" />
        </div>
        <div class="form-group">
          <label>Tiempo a simular (segundos)</label>
          <input id="timeToSimulate" type="number" required placeholder="5" min="1" max="60" />
        </div>
        <button type="submit" id="btnStartTimer">Iniciar Simulaci√≥n</button>
        <button type="button" id="btnStopTimer" disabled>Detener</button>
        <div id="msgTimeValidator" class="message"></div>
        <div id="timerDisplay" style="font-size: 18px; font-weight: bold; margin: 10px 0;"></div>
      </form>
    </div>
  </div>

  <script>
    // ============================================================================
    // ‚öôÔ∏è CONFIGURACI√ìN GLOBAL
    // ============================================================================
    // Variables que definen el comportamiento general de la aplicaci√≥n.

    const API_BASE = "http://127.0.0.1:8000/api"; // Direcci√≥n base del backend

    // Estado global de la aplicaci√≥n.
    const appState = {
      currentCourseData: null,    // Datos del curso actualmente cargado
      myCourses: [],              // Lista de mis cursos
      activeTimer: null,          // Timer activo para time validator
      timerStartTime: null,       // Tiempo de inicio del timer
    };

    // ============================================================================
    // üêõ DEBUGGING FUNCTIONS (Actor: Desarrollador)
    // ============================================================================
    // Funciones para ayudar al desarrollador a entender qu√© est√° pasando.

    /**
     * Muestra un mensaje en un elemento HTML.
     * Es una funci√≥n IMPURA porque interact√∫a con el DOM.
     * @param {HTMLElement} element - El elemento HTML donde se mostrar√° el mensaje.
     * @param {string} text - El texto del mensaje a mostrar.
     * @param {string} type - El tipo de mensaje ('success', 'error', 'warn', 'info').
     */
    const showMessage = (element, text, type = "success") => {
      element.className = `message ${type}`;
      element.textContent = text;
      element.style.display = "block";
    };

    /**
     * Oculta un elemento HTML.
     * Es una funci√≥n IMPURA porque interact√∫a con el DOM.
     * @param {HTMLElement} element - El elemento HTML a ocultar.
     */
    const hideMessage = (element) => {
      element.style.display = "none";
    };

    /**
     * Registra un mensaje en la consola del navegador para depuraci√≥n.
     * Es una funci√≥n IMPURA porque realiza una operaci√≥n de E/S en la consola.
     * @param {string} label - Una etiqueta para identificar el mensaje.
     * @param {any} data - Los datos a registrar.
     */
    const debugLog = (label, data) => {
      console.log(`üîç ${label}:`, data);
    };

    // ============================================================================
    // üé® FRONTEND FUNCTIONS (Actor: Interfaz de Usuario / L√≥gica de UI)
    // ============================================================================
    // Funciones que manejan la l√≥gica de la interfaz de usuario y la preparaci√≥n de datos.

    /**
     * Actualiza el estado de la aplicaci√≥n de forma inmutable.
     * Es una funci√≥n IMPURA porque modifica el estado global.
     * @param {string} key - Clave del estado a actualizar.
     * @param {any} value - Nuevo valor.
     */
    const updateAppState = (key, value) => {
      appState[key] = value;
      debugLog(`App state updated: ${key}`, value);
    };

    /**
     * Calcula el porcentaje de progreso basado en lecciones completadas.
     * Es una funci√≥n PURA: dado el mismo input, siempre devuelve el mismo output.
     * @param {number} completed - N√∫mero de lecciones completadas.
     * @param {number} total - N√∫mero total de lecciones.
     * @returns {number} Porcentaje de progreso (0-100).
     */
    const calculateProgressPercentage = (completed, total) => {
      if (total === 0) return 0;
      return Math.round((completed / total) * 100);
    };

    /**
     * Formatea el tiempo en segundos a formato legible.
     * Es una funci√≥n PURA.
     * @param {number} seconds - Tiempo en segundos.
     * @returns {string} Tiempo formateado (ej. "2m 30s").
     */
    const formatTime = (seconds) => {
      if (seconds < 60) return `${seconds}s`;
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      return `${minutes}m ${remainingSeconds}s`;
    };

    /**
     * Renderiza la lista de cursos en el DOM.
     * Es una funci√≥n IMPURA porque modifica el DOM.
     * @param {Array} courses - Array de objetos de curso.
     * @param {HTMLElement} container - Contenedor donde renderizar.
     */
    const renderMyCourses = (courses, container) => {
      if (!courses || courses.length === 0) {
        container.innerHTML = '<p>No tienes cursos disponibles.</p>';
        return;
      }

      const coursesHTML = courses.map(course => `
        <div class="course-card">
          <div class="course-title">${course.name}</div>
          <p><strong>Sensei:</strong> ${course.sensei_name}</p>
          <p><strong>Descripci√≥n:</strong> ${course.description}</p>
          <p><strong>Horas:</strong> ${course.hours}h | <strong>Lecciones:</strong> ${course.lessons_count}</p>
          <p><strong>Precio:</strong> $${course.price}</p>
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${course.progress}%"></div>
          </div>
          <p><strong>Progreso:</strong> ${course.progress}%</p>
          <button onclick="loadCourseContent(${course.id})" class="success">Ver Contenido</button>
        </div>
      `).join('');

      container.innerHTML = coursesHTML;
    };

    /**
     * Renderiza el contenido detallado de un curso.
     * Es una funci√≥n IMPURA porque modifica el DOM.
     * @param {Object} courseData - Datos completos del curso.
     * @param {HTMLElement} container - Contenedor donde renderizar.
     */
    const renderCourseContent = (courseData, container) => {
      const course = courseData.course_content;
      const progress = course.progress;

      let contentHTML = `
        <div class="course-card">
          <div class="course-title">${course.name}</div>
          <p><strong>Sensei:</strong> ${course.sensei_name}</p>
          <p><strong>Descripci√≥n:</strong> ${course.description}</p>
          <p><strong>Horas:</strong> ${course.hours}h</p>
          <p><strong>Precio:</strong> $${course.price}</p>
          <p><strong>¬øPagado?:</strong> ${courseData.is_paid ? 'S√≠' : 'No'}</p>
          
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${progress.progress_percentage}%"></div>
          </div>
          <p><strong>Progreso:</strong> ${progress.completed_lessons}/${progress.total_lessons} lecciones (${progress.progress_percentage}%)</p>
        </div>
        
        <h3>Contenido del Curso</h3>
      `;

      // Renderizar secciones y lecciones
      Object.entries(course.content).forEach(([sectionNumber, section]) => {
        contentHTML += `
          <div style="margin: 20px 0; padding: 15px; border: 2px solid #007bff; border-radius: 8px;">
            <h4>Secci√≥n ${sectionNumber}: ${section.title}</h4>
            <div>
        `;

        section.lessons.forEach(lesson => {
          const completedClass = lesson.is_completed ? 'lesson-completed' : '';
          const completedText = lesson.is_completed ? '‚úÖ Completada' : '‚è≥ Pendiente';
          
          contentHTML += `
            <div class="lesson-item ${completedClass}">
              <div class="lesson-info">
                <strong>${lesson.title}</strong><br>
                <small>Tipo: ${lesson.mime_type} | Tiempo requerido: ${formatTime(lesson.time_validator)}</small><br>
                <small>Estado: ${completedText}</small>
              </div>
              <div class="lesson-actions">
                <button onclick="markLessonProgress(${lesson.id})" ${lesson.is_completed ? 'disabled' : ''}>
                  Marcar Completada
                </button>
                <button onclick="simulateTimeValidator(${lesson.id}, ${lesson.time_validator})" class="warning">
                  Simular Tiempo
                </button>
              </div>
            </div>
          `;
        });

        contentHTML += `
            </div>
          </div>
        `;
      });

      container.innerHTML = contentHTML;
    };

    /**
     * Carga el contenido de un curso espec√≠fico.
     * Es una funci√≥n IMPURA porque llama a funciones de backend y modifica el DOM.
     * @param {number} courseId - ID del curso a cargar.
     */
    const loadCourseContent = async (courseId) => {
      document.getElementById('courseId').value = courseId;
      document.getElementById('formGetCourseContent').dispatchEvent(new Event('submit'));
    };

    /**
     * Marca una lecci√≥n como completada.
     * Es una funci√≥n IMPURA porque llama a funciones de backend.
     * @param {number} lessonId - ID de la lecci√≥n a marcar.
     */
    const markLessonProgress = async (lessonId) => {
      const result = await makeApiRequest(`${API_BASE}/courses/mark_progress`, { lesson_id: lessonId });
      
      if (result.ok) {
        showMessage(document.getElementById('msgCourseContent'), 'Lecci√≥n marcada como completada', 'success');
        // Recargar el contenido del curso para actualizar el estado
        if (appState.currentCourseData) {
          const courseId = appState.currentCourseData.course_content.id;
          loadCourseContent(courseId);
        }
      } else {
        showMessage(document.getElementById('msgCourseContent'), `Error: ${result.data}`, 'error'); //mandame al codigo del back
      }
    };

    /**
     * Simula el time validator para una lecci√≥n espec√≠fica.
     * Es una funci√≥n IMPURA porque modifica el DOM y maneja timers.
     * @param {number} lessonId - ID de la lecci√≥n.
     * @param {number} timeRequired - Tiempo requerido en segundos.
     */
    const simulateTimeValidator = (lessonId, timeRequired) => {
      document.getElementById('timeValidatorLessonId').value = lessonId;
      document.getElementById('timeToSimulate').value = Math.ceil(timeRequired);
      
      // Scroll hacia el simulador
      document.getElementById('formTimeValidator').scrollIntoView({ behavior: 'smooth' });
      showMessage(document.getElementById('msgTimeValidator'), 
        `Configurado para simular ${formatTime(Math.ceil(timeRequired))} en la lecci√≥n ${lessonId}`, 'info');
    };

    // ============================================================================
    // üåê BACKEND FUNCTIONS (Actor: Servidor / API)
    // ============================================================================
    // Funciones que se encargan de la comunicaci√≥n con el servidor backend.

    /**
     * Realiza una petici√≥n HTTP al backend.
     * Es una funci√≥n IMPURA porque realiza operaciones de red.
     * @param {string} url - La URL completa del endpoint.
     * @param {Object} bodyData - Los datos a enviar (opcional para GET).
     * @param {string} method - M√©todo HTTP ('GET' o 'POST').
     * @returns {Promise<Object>} Una promesa que resuelve con { ok, status, data }.
     */
const makeApiRequest = async (url, bodyData = null, method = 'POST') => {
  debugLog("Sending API request", { url, bodyData, method });
  
  const requestOptions = {
    method: method,
    credentials: "include", // CR√çTICO: Incluir cookies para autenticaci√≥n
  };

  // Solo agregar body para m√©todos que no sean GET
  if (method !== 'GET' && bodyData !== null) {
    // Siempre enviar como Form data
    requestOptions.body = new URLSearchParams(bodyData);
    // No establecer Content-Type, el navegador lo har√° autom√°ticamente
  }

  try {
    const response = await fetch(url, requestOptions);
    
    const responseText = await response.text();
    let parsedData;
    
    try {
      parsedData = responseText ? JSON.parse(responseText) : null;
    } catch (e) {
      parsedData = responseText;
    }
    
    debugLog("API response received", { 
      ok: response.ok, 
      status: response.status, 
      data: parsedData 
    });
    
    return {
      ok: response.ok,
      status: response.status,
      data: parsedData
    };
    
  } catch (error) {
    debugLog("API request failed (network error)", error);
    return {
      ok: false,
      status: 0,
      data: error.message
    };
  }
};

    // ============================================================================
    // ‚ö° EVENT HANDLERS (Actor: Interacciones del Usuario)
    // ============================================================================
    // Funciones que responden a las acciones del usuario.

    /**
     * Maneja la carga de mis cursos.
     */
    const handleLoadMyCourses = async () => {
      const msgElement = document.getElementById("msgMyCourses");
      const container = document.getElementById("myCoursesContainer");
      hideMessage(msgElement);
      
      const result = await makeApiRequest(`${API_BASE}/courses/my_courses`, null, 'GET');
      
      if (result.ok) {
        updateAppState('myCourses', result.data.courses);
        renderMyCourses(result.data.courses, container);
        showMessage(msgElement, `Cargados ${result.data.courses.length} cursos. Es sensei: ${result.data.is_sensei ? 'S√≠' : 'No'}`, "success");
      } else {
        showMessage(msgElement, `Error: ${result.data}`, "error");
        container.innerHTML = '';
      }
    };

    /**
     * Maneja la obtenci√≥n del contenido de un curso.
     */
    const handleGetCourseContent = async (event) => {
      event.preventDefault();
      
      const msgElement = document.getElementById("msgCourseContent");
      const container = document.getElementById("courseContentContainer");
      hideMessage(msgElement);
      
      const courseId = parseInt(document.getElementById("courseId").value);
      
      debugLog("Get course content", { courseId });

      const result = await makeApiRequest(`${API_BASE}/courses/course_content?course_id=${courseId}`, null, 'GET');
      
      if (result.ok) {
        updateAppState('currentCourseData', result.data);
        renderCourseContent(result.data, container);
        showMessage(msgElement, "Contenido del curso cargado exitosamente.", "success");
      } else {
        showMessage(msgElement, `Error: ${result.data}`, "error");
        container.innerHTML = '';
      }
    };

    /**
     * Maneja la creaci√≥n de una nueva secci√≥n.
     */
    const handleCreateSection = async (event) => {
      event.preventDefault();
      
      const msgElement = document.getElementById("msgCreateSection");
      hideMessage(msgElement);
      
      const courseId = parseInt(document.getElementById("newSectionCourseId").value);
      const sectionName = document.getElementById("sectionName").value;
      
      debugLog("Create section", { courseId, sectionName });

      const result = await makeApiRequest(`${API_BASE}/workbrench/new_section/${courseId}?section_name=${encodeURIComponent(sectionName)}`, null, 'POST');
      
      if (result.ok) {
        showMessage(msgElement, "Secci√≥n creada exitosamente.", "success");
        // Limpiar el formulario
        document.getElementById("formCreateSection").reset();
      } else {
        showMessage(msgElement, `Error: ${result.data}`, "error");
      }
    };

    /**
     * Maneja el marcado manual de progreso.
     */
    const handleMarkProgress = async (event) => {
      event.preventDefault();
      
      const msgElement = document.getElementById("msgMarkProgress");
      hideMessage(msgElement);
      
      const lessonId = parseInt(document.getElementById("lessonId").value);
      
      debugLog("Mark progress", { lessonId });

      const result = await makeApiRequest(`${API_BASE}/courses/mark_progress`, { lesson_id: lessonId });
      
      if (result.ok) {
        showMessage(msgElement, "Lecci√≥n marcada como completada.", "success");
        document.getElementById("formMarkProgress").reset();
      } else {
        showMessage(msgElement, `Error: ${result.data}`, "error");
      }
    };

    /**
     * Maneja el simulador de time validator.
     */
    const handleTimeValidator = async (event) => {
      event.preventDefault();
      
      const msgElement = document.getElementById("msgTimeValidator");
      const timerDisplay = document.getElementById("timerDisplay");
      const btnStart = document.getElementById("btnStartTimer");
      const btnStop = document.getElementById("btnStopTimer");
      
      hideMessage(msgElement);
      
      const lessonId = parseInt(document.getElementById("timeValidatorLessonId").value);
      const timeToSimulate = parseInt(document.getElementById("timeToSimulate").value);
      
      debugLog("Time validator simulation", { lessonId, timeToSimulate });

      // Limpiar timer anterior si existe
      if (appState.activeTimer) {
        clearInterval(appState.activeTimer);
      }

      let remainingTime = timeToSimulate;
      updateAppState('timerStartTime', Date.now());
      
      btnStart.disabled = true;
      btnStop.disabled = false;
      
      showMessage(msgElement, `Simulando ${formatTime(timeToSimulate)} para la lecci√≥n ${lessonId}...`, "info");
      
      const timer = setInterval(async () => {
        timerDisplay.textContent = `Tiempo restante: ${formatTime(remainingTime)}`;
        remainingTime--;
        
        if (remainingTime < 0) {
          clearInterval(timer);
          updateAppState('activeTimer', null);
          
          // Marcar autom√°ticamente como completada
          const result = await makeApiRequest(`${API_BASE}/courses/mark_progress`, { lesson_id: lessonId });
          
          if (result.ok) {
            showMessage(msgElement, `¬°Tiempo completado! Lecci√≥n ${lessonId} marcada como completada autom√°ticamente.`, "success");
            // Recargar contenido si est√° disponible
            if (appState.currentCourseData) {
              const courseId = appState.currentCourseData.course_content.id;
              loadCourseContent(courseId);
            }
          } else {
            showMessage(msgElement, `Tiempo completado, pero error al marcar: ${result.data}`, "error");
          }
          
          timerDisplay.textContent = "¬°Completado!";
          btnStart.disabled = false;
          btnStop.disabled = true;
        }
      }, 1000);
      
      updateAppState('activeTimer', timer);
    };

    /**
     * Maneja la detenci√≥n del timer.
     */
    const handleStopTimer = () => {
      if (appState.activeTimer) {
        clearInterval(appState.activeTimer);
        updateAppState('activeTimer', null);
        
        document.getElementById("timerDisplay").textContent = "Timer detenido";
        document.getElementById("btnStartTimer").disabled = false;
        document.getElementById("btnStopTimer").disabled = true;
        
        showMessage(document.getElementById("msgTimeValidator"), "Simulaci√≥n detenida.", "warn");
      }
    };

    // ============================================================================
    // üöÄ INITIALIZATION (Actor: Sistema / Arranque de la Aplicaci√≥n)
    // ============================================================================
    // C√≥digo que se ejecuta una vez cuando la p√°gina se carga para configurar todo.

    /**
     * Funci√≥n principal de inicializaci√≥n de la aplicaci√≥n.
     * Se ejecuta cuando el DOM est√° completamente cargado.
     */
    document.addEventListener('DOMContentLoaded', () => {
      debugLog("DOM Content Loaded", "Starting course progress system initialization...");

      // Asignar event listeners a los elementos
      document.getElementById("btnLoadMyCourses").addEventListener("click", handleLoadMyCourses);
      document.getElementById("formGetCourseContent").addEventListener("submit", handleGetCourseContent);
      document.getElementById("formCreateSection").addEventListener("submit", handleCreateSection);
      document.getElementById("formMarkProgress").addEventListener("submit", handleMarkProgress);
      document.getElementById("formTimeValidator").addEventListener("submit", handleTimeValidator);
      document.getElementById("btnStopTimer").addEventListener("click", handleStopTimer);
      
      debugLog("Initialization Complete", "All event listeners attached successfully.");
      
      // Cargar mis cursos autom√°ticamente al iniciar
      handleLoadMyCourses();
    });
  </script>
</body>
</html>